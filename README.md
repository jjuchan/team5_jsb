## ğŸ“Œ 1. ê³¼ì œ ê°œìš”

- ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ê³ , ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™í•˜ì—¬ **ì§ˆë¬¸/ë‹µë³€ ê²Œì‹œíŒ(Q&A)** ê¸°ëŠ¥ì„ ì™„ì„±í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.
- ë‹¨ìˆœíˆ ì½”ë“œë§Œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **MVC êµ¬ì¡°ì˜ ì´í•´**, **ë°ì´í„°ë² ì´ìŠ¤ í™œìš©**, **íšŒì› ì¸ì¦/ì¸ê°€** ë“± **ì›¹ ì„œë¹„ìŠ¤ ì „ë°˜ì— ëŒ€í•œ ê¸°ë³¸ê¸°**ë¥¼ í•™ìŠµí•˜ëŠ” ë° ì´ˆì ì„ ë‘¡ë‹ˆë‹¤. ğŸš€
- ê³¼ì •ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ìµœëŒ€í•œ ì ìš©í•´ë³´ì„¸ìš”.

---

## ğŸ› ï¸ 2. êµ¬í˜„ ë²”ìœ„

### âš™ï¸ ê¸°ë³¸ í”„ë¡œì íŠ¸ ì„¸íŒ…

- Spring Initializrë¥¼ í™œìš©í•´ í”„ë¡œì íŠ¸ ìƒì„±
- í•„ìˆ˜ Dependencies:
  - ğŸŒ Spring Web
  - ğŸ¨ Thymeleaf
  - ğŸ—„ï¸ Spring Data JPA
  - ğŸ’¾ H2 Database
  - ğŸ”„ Spring Boot DevTools
  - ğŸŒ¶ï¸Lombok

---

## ğŸ“ 3. ê¸°ë³¸ ê¸°ëŠ¥

### ğŸ“‹ ê²Œì‹œíŒ ê¸°ëŠ¥ (Q&A)

ì•„ë˜ ê¸°ëŠ¥ì€ í•„ìˆ˜ë¡œ êµ¬í˜„ í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.

- ì§ˆë¬¸
  - ì§ˆë¬¸ ëª©ë¡ ë³´ê¸°
  - ì§ˆë¬¸ ë“±ë¡ âœï¸
  - ì§ˆë¬¸ ìƒì„¸ ë³´ê¸° ğŸ”
  - ì§ˆë¬¸ ìˆ˜ì • âœï¸
  - ì§ˆë¬¸ ì‚­ì œ ğŸ—‘ï¸
- ë‹µë³€
  - ë‹µë³€ ë“±ë¡
  - ë‹µë³€ ìˆ˜ì •
  - ë‹µë³€ ì‚­ì œ
- ê²€ìƒ‰ ê¸°ëŠ¥ ğŸ” (ì œëª©/ë‚´ìš©/ì‘ì„±ì ê¸°ì¤€ ê²€ìƒ‰)

### ğŸ‘¤ íšŒì› ê¸°ëŠ¥

- íšŒì›ê°€ì… âœ¨
- ë¡œê·¸ì¸ & ë¡œê·¸ì•„ì›ƒ ğŸ” (Spring Security í™œìš©)

---

## ğŸŒŸ 4. ì¶”ê°€ ê¸°ëŠ¥ (ì‹¬í™” Â· ì„ íƒ)

- ğŸ“„ ì§ˆë¬¸, ë‹µë³€ í˜ì´ì§• ê¸°ëŠ¥ êµ¬í˜„
- â±ï¸ ìƒì„±ì¼ì‹œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì§ˆë¬¸, ë‹µë³€ ì •ë ¬ ê¸°ëŠ¥ êµ¬í˜„
- ğŸ‘€ ì¡°íšŒ ìˆ˜ í‘œì‹œ ê¸°ëŠ¥ êµ¬í˜„
- ğŸ–¼ï¸ ë§ˆì´í˜ì´ì§€ êµ¬í˜„
- ğŸŒ ì†Œì…œ ë¯¸ë””ì–´ ë¡œê·¸ì¸ (êµ¬ê¸€)
- ğŸ“ ë§ˆí¬ë‹¤ìš´ ì—ë””í„° ì ìš©í•˜ê¸° (ê¸€ ì‘ì„± ì‹œ ì ìš©)

---

## ğŸ“¤ 5. ì œì¶œ ë°©ë²•

- íŒ€ì¥ GitHub Repositoryì— ì½”ë“œ ì—…ë¡œë“œ
- `README.md` ì‘ì„± (ë‹¤ìŒ í•­ëª© í¬í•¨ í•„ìˆ˜)
  - ğŸ”§ **êµ¬í˜„í•œ ê¸°ëŠ¥ ëª©ë¡ê³¼ ë‹´ë‹¹**
  - **ğŸŒíŠ¸ëŸ¬ë¸”ìŠˆíŒ…**
  - ğŸ’¡ **ì–´ë ¤ì› ë˜ ì  & ëŠë‚€ ì **  (í•™ìŠµ ê³¼ì •ì—ì„œì˜ ê³ ë¯¼ê³¼ ë°°ìš´ ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì‘ì„±)

---

## ğŸŒ± ê³µí†µ ì—”í‹°í‹° (BaseEntity)

í”„ë¡œì íŠ¸ ì „ë°˜ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì—”í‹°í‹°ì…ë‹ˆë‹¤.  
ëª¨ë“  ì—”í‹°í‹°ì— **ìƒì„±/ìˆ˜ì • ì‹œê°„**ì„ ìë™ìœ¼ë¡œ ê¸°ë¡í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.

| ğŸ·ï¸ í•„ë“œëª… | ğŸ—‚ï¸ íƒ€ì… | ğŸ“– ì„¤ëª… | âš™ï¸ ë¹„ê³  |
| --- | --- | --- | --- |
| `id` | Long | ê¸°ë³¸ í‚¤ | ìë™ ì¦ê°€ (`IDENTITY`) |
| `createdDate` | LocalDateTime | ìƒì„±ì¼ | `@CreatedDate`, ìˆ˜ì • ë¶ˆê°€ |
| `modifiedDate` | LocalDateTime | ìˆ˜ì •ì¼ | `@LastModifiedDate` |


---

# ğŸ“Œ Q&A ê²Œì‹œíŒ - íšŒì› ê¸°ëŠ¥(ë‹´ë‹¹ - ì„ì°½ê¸°)

## ğŸ”§ í™˜ê²½ ì„¤ì •

### 1. Google OAuth2 ì„¤ì • (í•„ìˆ˜)

Application ì‹¤í–‰ ì‹œ Google ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì„¤ì •ì´ í•„ìˆ˜

#### 1.1 Google Cloud SDK ì„¤ì¹˜

- **winget**, **choco**, ë˜ëŠ” **ì„¤ì¹˜ í”„ë¡œê·¸ë¨** ì‚¬ìš©

#### 1.2 ì„¤ì¹˜ í›„ Git Bashì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ ì‹¤í–‰

```bash
# Google Cloud SDK ë²„ì „ í™•ì¸
gcloud --version

# Google ê³„ì • ë¡œê·¸ì¸
gcloud auth login

# ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë³¸ ìê²©ì¦ëª… ì„¤ì •
gcloud auth application-default login

# í”„ë¡œì íŠ¸ ì„¤ì •
gcloud config set project complete-welder-330305
```

> **ì°¸ê³ **: `application-default login`ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Secret Managerë¥¼ ì½ì„ ìê²©ì¦ëª…(ADC)ì„ ì €ì¥
>
> **í”„ë¡œì íŠ¸ ê´€ë¦¬ì ì‘ì—…**: íŒ€ì› êµ¬ê¸€ ê³„ì •ì— í”„ë¡œì íŠ¸ IAM ì—­í•  ë¶€ì—¬ í•„ìš”
> - `roles/secretmanager.secretAccessor`

#### 1.3 Secret Manager ê°’ í™•ì¸

```bash
# OAuth Client ID í™•ì¸
gcloud secrets versions access latest --secret=google-oauth-client-id --project=complete-welder-330305

# OAuth Client Secret í™•ì¸
gcloud secrets versions access latest --secret=google-oauth-client-secret --project=complete-welder-330305
```
> âœ… ê°’ì´ ì¶œë ¥ë˜ë©´ ì ‘ê·¼ ê¶Œí•œì´ ì •ìƒì ìœ¼ë¡œ ì„¤ì • ì™„ë£Œ

### 2) application.yml ì„¤ì •

`src/main/resources/application.yml`ì— ë‹¤ìŒ ì„¤ì •ì´ í•„ìš”
```yaml
spring:
  config:
    import: "optional:sm://"

  cloud:
    gcp:
      secretmanager:
        project-id: complete-welder-330305

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: '${sm://google-oauth-client-id}'
            client-secret: '${sm://google-oauth-client-secret}'
            scope: openid, email, profile
            redirect-uri: "{baseUrl}/login/oauth2/code/google"
```

---

## âœ… ê¸°ëŠ¥

- [x] íšŒì›ê°€ì… âœï¸
- [x] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ğŸ”
- [x] Google ì†Œì…œ ë¡œê·¸ì¸ ğŸŒ
- [x] ë³´ì•ˆ ì„¤ì • ğŸ›¡ï¸

---

## âœ… í™”ë©´

> íšŒì›ê°€ì… í˜ì´ì§€
![signup.png](signup.png)
> ë¡œê·¸ì¸ í˜ì´ì§€
![login.png](login.png)
> Google ì†Œì…œ ë¡œê·¸ì¸
![socialLogin.png](socialLogin.png)
---

## âœ… Entity ì„¤ê³„

## User

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| --- | --- | --- | --- |
| id | Long | ê¸°ë³¸ í‚¤ | BaseEntity ìƒì† |
| username | String | ì‚¬ìš©ìëª… | `@Column(unique = true, length = 50)` |
| password | String | ë¹„ë°€ë²ˆí˜¸ | BCrypt ì•”í˜¸í™” |
| email | String | ì´ë©”ì¼ | `@Column(unique = true, length = 100)` |
| provider | AuthProvider | ë¡œê·¸ì¸ ë°©ì‹ | `@Enumerated(EnumType.STRING)` |
| providerId | String | ì†Œì…œ ë¡œê·¸ì¸ ID | `@Column(length = 100)` |
| createdDate | LocalDateTime | ìƒì„±ì¼ | BaseEntity |
| modifiedDate | LocalDateTime | ìˆ˜ì •ì¼ | BaseEntity |

## AuthProvider (Enum)

| ê°’ | ì„¤ëª… |
| --- | --- |
| LOCAL | ì¼ë°˜ íšŒì›ê°€ì… |
| GOOGLE | Google OAuth |
| KAKAO | Kakao OAuth (ì¶”í›„ êµ¬í˜„) |
| NAVER | Naver OAuth (ì¶”í›„ êµ¬í˜„) |

---

### ì—°ê´€ ê´€ê³„

- `questions : List<Question>` â†’ **OneToMany** (ì‘ì„±í•œ ì§ˆë¬¸ ëª©ë¡, CascadeType.PERSIST/REMOVE)
- `answers : List<Answer>` â†’ **OneToMany** (ì‘ì„±í•œ ë‹µë³€ ëª©ë¡, CascadeType.PERSIST/REMOVE)

---

## ğŸ“Œ Thymeleaf Template

- íšŒì›ê°€ì…: `user/signup`
- ë¡œê·¸ì¸: `user/login`
- ë§ˆì´í˜ì´ì§€: `mypage`
- ì—ëŸ¬ ì²˜ë¦¬: `common/fragment/errors`
- í—¤ë”: `common/fragment/header`
- ë ˆì´ì•„ì›ƒ: `templates/layout`

## API ëª…ì„¸ì„œ

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ê°’ | ëª¨ë¸ ì†ì„± | ë°˜í™˜ |
| --- | --- | --- | --- | --- | --- |
| GET | `/user/signup` | íšŒì›ê°€ì… í¼ | - | `signupRequest` | `user/signup` |
| POST | `/user/signup` | íšŒì›ê°€ì… ì²˜ë¦¬ | `SignupRequest` (ê²€ì¦ í¬í•¨) | - | ì„±ê³µ: `redirect:/user/login`<br>ì‹¤íŒ¨: `user/signup` |
| GET | `/user/login` | ë¡œê·¸ì¸ í¼ | - | `loginRequest` | `user/login` |
| POST | `/user/login-validate` | ë¡œê·¸ì¸ ì²˜ë¦¬ | `LoginRequest` (ê²€ì¦ í¬í•¨) | - | ì„±ê³µ: `redirect:/`<br>ì‹¤íŒ¨: `redirect:/user/login?error` |
| GET | `/user/logout` | ë¡œê·¸ì•„ì›ƒ | - | - | `redirect:/user/login` |
| GET | `/oauth2/authorization/google` | Google ë¡œê·¸ì¸ | - | - | Google ì¸ì¦ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| GET | `/login/oauth2/code/google` | Google ì½œë°± | ì¸ì¦ ì½”ë“œ | - | ì„±ê³µ: `redirect:/`<br>ì‹¤íŒ¨: ì—ëŸ¬ í˜ì´ì§€ |
| GET | `/mypage` | ë§ˆì´í˜ì´ì§€ | `page`(int, ê¸°ë³¸ 0), `answerPage`(int, ê¸°ë³¸ 0) | `user`(UserProfileDto), `questions`(Page<Question>), `answers`(Page<Answer>) | `mypage` |

---

# ğŸ› ï¸ Trouble Shooting

## 1. ë¬¸ì œ ìƒí™© - OAuth2 vs OIDC êµ¬ë¶„

- ì²˜ìŒì—ëŠ” Google ë¡œê·¸ì¸ì„ **OAuth2 ë°©ì‹**ìœ¼ë¡œ êµ¬í˜„í•˜ë ¤ í–ˆìŒ.
- `CustomOAuth2UserService`ë¥¼ ë§Œë“¤ì–´ì„œ `userInfoEndpoint`ì— ì„¤ì •í–ˆìœ¼ë‚˜ ì „í˜€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ.
- ë””ë²„ê·¸ ë¡œê·¸ê°€ í•˜ë‚˜ë„ ì¶œë ¥ë˜ì§€ ì•Šì•„ì„œ ì„¤ì • ë¬¸ì œì¸ì§€ ì˜ì‹¬í–ˆìŒ.

## 2. ì‹œë„í•œ í•´ê²° ê³¼ì •

1. SecurityConfig ì„¤ì •ì„ ì—¬ëŸ¬ ë²ˆ í™•ì¸í•˜ê³  Bean ë“±ë¡ ìƒíƒœë„ ì ê²€.
2. ë¡œê·¸ë¥¼ ìì„¸íˆ ë¶„ì„í•œ ê²°ê³¼ `OIDC_USER` ê¶Œí•œê³¼ Google scopeë“¤ì´ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ë°œê²¬.
3. Googleì´ **OpenID Connect(OIDC)** ë¥¼ ì§€ì›í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë¨.
4. `CustomOidcUserService`ë¡œ ì „í™˜í•˜ê³  `.oidcUserService()` ì„¤ì •ìœ¼ë¡œ ë³€ê²½.

## 3. ë°°ìš´ ì 

- **Googleì€ OIDCë¥¼ ì‚¬ìš©**í•˜ë¯€ë¡œ `OidcUserService` í™•ì¥ í•„ìš”.
- **Kakao, NaverëŠ” ì¼ë°˜ OAuth2**ì´ë¯€ë¡œ `OAuth2UserService` ì‚¬ìš©.
- Spring Securityê°€ ìë™ìœ¼ë¡œ OIDCì™€ OAuth2ë¥¼ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ë°°ì› ìŒ.

---

## 4. ë¬¸ì œ ìƒí™© - Principal íƒ€ì… ë¶ˆì¼ì¹˜

- `@AuthenticationPrincipal CustomUserDetails`ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° Google ë¡œê·¸ì¸ ì‚¬ìš©ìëŠ” `null`ë¡œ ì²˜ë¦¬ë¨.
- ë§ˆì´í˜ì´ì§€, ì§ˆë¬¸ ë“±ë¡, ë‹µë³€ ë“±ë¡ì—ì„œ ëª¨ë‘ NullPointerException ë°œìƒ.
- ì¼ë°˜ ë¡œê·¸ì¸ê³¼ ì†Œì…œ ë¡œê·¸ì¸ì˜ Principal íƒ€ì…ì´ ë‹¬ë¼ì„œ ìƒê¸´ ë¬¸ì œ.

## 5. ì‹œë„í•œ í•´ê²° ê³¼ì •

1. ì²˜ìŒì—ëŠ” Google ë¡œê·¸ì¸ë§Œ CustomOidcUserë¡œ ë³€ê²½í•˜ë ¤ í–ˆìœ¼ë‚˜ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ë„ê°€ í¼.
2. `Authentication` ê°ì²´ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½.
3. `getCurrentUser()` í—¬í¼ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì„œ íƒ€ì…ë³„ë¡œ ì•ˆì „í•˜ê²Œ User ì •ë³´ ì¶”ì¶œ.
4. ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ìš©.

## 6. ë°°ìš´ ì 

- Spring Securityì—ì„œ **ì¸ì¦ ë°©ì‹ë³„ë¡œ Principal íƒ€ì…ì´ ë‹¤ë¥´ë‹¤**ëŠ” ê²ƒì„ ë°°ì›€.
- `instanceof`ë¥¼ í™œìš©í•œ **íƒ€ì… ì•ˆì „í•œ ì²˜ë¦¬ ë°©ë²•** ìŠµë“.
- í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **ì—¬ëŸ¬ ì¸ì¦ ë°©ì‹ì„ ë™ì‹œ ì§€ì›**í•˜ëŠ” ë°©ë²•ì„ ìµí˜.

---

## 7. ë¬¸ì œ ìƒí™© - ìˆœí™˜ ì˜ì¡´ì„±

- Bean ìƒì„± ê³¼ì •ì—ì„œ `BeanCurrentlyInCreationException` ë°œìƒ.
- SecurityConfig â†” UserService â†” PasswordEncoder ê°„ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ.
- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ.

## 8. ì‹œë„í•œ í•´ê²° ê³¼ì •

1. ì˜ì¡´ì„± ê´€ê³„ë¥¼ ë¶„ì„í•´ì„œ ìˆœí™˜ ê³ ë¦¬ íŒŒì•….
2. `@Lazy` ì–´ë…¸í…Œì´ì…˜ì„ ì ì ˆí•œ ìœ„ì¹˜ì— ì ìš©.
3. UserServiceì™€ SecurityConfig ëª¨ë‘ì— `@Lazy` ì„¤ì •.

## 9. ë°°ìš´ ì 

- Springì—ì„œ **ìˆœí™˜ ì˜ì¡´ì„± ë¬¸ì œì˜ ì›ì¸ê³¼ í•´ê²° ë°©ë²•** ì´í•´.
- `@Lazy`ë¥¼ í†µí•œ **ì§€ì—° ë¡œë”©ìœ¼ë¡œ ìˆœí™˜ ê³ ë¦¬ë¥¼ ëŠëŠ” ë°©ë²•** í•™ìŠµ.
- **ë³µì¡í•œ ë³´ì•ˆ ì„¤ì •ì—ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ**ë¼ëŠ” ê²ƒì„ ì¸ì‹.

---

# ğŸ“‘ ë§ˆì´í˜ì´ì§€ ê¸°ëŠ¥ (ë‹´ë‹¹ - ë…¸í˜„ì •)

## ğŸ” êµ¬í˜„ ê°œìš”

- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ìì‹ ì˜ í™œë™ ë‚´ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” **ë§ˆì´í˜ì´ì§€** í™”ë©´ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë‹¨ìˆœ ì¡°íšŒë¿ë§Œ ì•„ë‹ˆë¼, **íšŒì› ì •ë³´ + ë‚´ê°€ ì‘ì„±í•œ ì§ˆë¬¸ ëª©ë¡ + ë‚´ê°€ ì‘ì„±í•œ ë‹µë³€ ëª©ë¡**ì„ í˜ì´ì§• ì²˜ë¦¬í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.
- Spring Securityì˜ ì¸ì¦ ê°ì²´(`@AuthenticationPrincipal`)ë¥¼ í™œìš©í•˜ì—¬ **í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì**ì˜ ë°ì´í„°ë§Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ› ï¸ ì£¼ìš” ê¸°ëŠ¥

1. **íšŒì› ì •ë³´ í‘œì‹œ**
- ì‚¬ìš©ì ì´ë¦„, ì´ë©”ì¼ ë“±ì˜ ê¸°ë³¸ í”„ë¡œí•„ ì •ë³´ ì¶œë ¥
- ì‚¬ìš©ì ì´ë¦„ì˜ ì²« ê¸€ìë¥¼ í™œìš©í•œ ê¸°ë³¸ ì•„ë°”íƒ€(Avatar) í‘œì‹œ
2. **ë‚´ê°€ ì‘ì„±í•œ ì§ˆë¬¸**
- ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì§ˆë¬¸ ëª©ë¡ì„ ìµœì‹ ìˆœìœ¼ë¡œ ì¶œë ¥
- í˜ì´ì§• ì²˜ë¦¬(ì´ì „/ë‹¤ìŒ ë²„íŠ¼) ë° ì¡°íšŒìˆ˜ í‘œì‹œ ê¸°ëŠ¥ ì œê³µ
3. **ë‚´ê°€ ì‘ì„±í•œ ë‹µë³€**
- ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë‹µë³€ ëª©ë¡ì„ ìµœì‹ ìˆœìœ¼ë¡œ ì¶œë ¥
- ë‹µë³€ì´ ì‘ì„±ëœ ì§ˆë¬¸ ì œëª©ê³¼ í•¨ê»˜ ë§í¬ë¡œ ì—°ê²°
- í˜ì´ì§• ì²˜ë¦¬ ë° ì‘ì„±ì¼ì‹œ ì¶œë ¥

---

## âœ…í™”ë©´
>![img_2.png](img_2.png)

---

## ğŸ’¡ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

- **LazyInitializationException** ë°œìƒ
  â†’ `AnswerRepository`ì—ì„œ `@EntityGraph(attributePaths={"question"})`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹µë³€ê³¼ í•¨ê»˜ ì§ˆë¬¸ ì—”í‹°í‹°ë¥¼ í•œ ë²ˆì— ë¡œë”©í•˜ë„ë¡ ìˆ˜ì •
- **í…œí”Œë¦¿ íŒŒì‹± ì˜¤ë¥˜** (`#strings.abbreviate` ì‚¬ìš© ë¶ˆê°€)
  â†’ `#strings.substring`ê³¼ ì‚¼í•­ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ì„ ì•ˆì „í•˜ê²Œ ì˜ë¼ë‚´ë„ë¡ ìˆ˜ì •
- **author ê°’ ëˆ„ë½**ìœ¼ë¡œ ë§ˆì´í˜ì´ì§€ì— ë‚´ ë‹µë³€ì´ í‘œì‹œë˜ì§€ ì•Šë˜ ë¬¸ì œ
  â†’ ë‹µë³€ ìƒì„± ì‹œ ë°˜ë“œì‹œ `answer.setAuthor(user)`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‘ì„±ìë¥¼ ì €ì¥í•˜ë„ë¡ ìˆ˜ì •

---

## ğŸ¨ í™”ë©´ êµ¬ì„±

- ëª¨ë˜í•œ ì¹´ë“œ ìŠ¤íƒ€ì¼ UI ì ìš©
- ì§ˆë¬¸/ë‹µë³€ì„ 2ì—´ ê·¸ë¦¬ë“œë¡œ ë°°ì¹˜í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ
- ë¹„ì–´ ìˆëŠ” ê²½ìš° `â€œì•„ì§ ì‘ì„±í•œ ì§ˆë¬¸/ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤â€` ë©”ì‹œì§€ ì¶œë ¥
---

# ğŸ“Œ Q&A ê²Œì‹œíŒ - Question ê¸°ëŠ¥(ë‹´ë‹¹ - ìœ¤ì£¼ì°¬)

## âœ… ê¸°ëŠ¥

- [x]  ì§ˆë¬¸ ëª©ë¡ ë³´ê¸°
- [x]  ì§ˆë¬¸ ë“±ë¡ âœï¸
- [x]  ì§ˆë¬¸ ìƒì„¸ ë³´ê¸° ğŸ”
  - ì œëª©, ë‚´ìš©, ì‘ì„±ì(í•©ì¹  ë•Œ ìƒê¸¸ ì˜ˆì •), ì¡°íšŒìˆ˜(ì„¸ì›…ë‹˜ì´ êµ¬í˜„), ì‘ì„±/ìˆ˜ì • ì‹œê°„ í‘œì‹œ
- [x]  ì§ˆë¬¸ ìˆ˜ì • âœï¸
- [x]  ì§ˆë¬¸ ì‚­ì œ ğŸ—‘ï¸

---

## âœ… í™”ë©´

>![img.png](img.png)
![img_1.png](img_1.png)

---

## âœ… Entity ì„¤ê³„

## Question

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| --- | --- | --- | --- |
| id | Long | ê¸°ë³¸ í‚¤ | BaseEntity ìƒì† |
| subject | String | ì§ˆë¬¸ ì œëª© | `@Column(length = 200)` |
| content | String | ì§ˆë¬¸ ë‚´ìš© | `@Column(columnDefinition = "TEXT")` |
| viewCount | Integer | ì¡°íšŒìˆ˜ | ê¸°ë³¸ê°’ 0 |
| createdDate | LocalDateTime | ìƒì„±ì¼ | BaseEntity |
| modifiedDate | LocalDateTime | ìˆ˜ì •ì¼ | BaseEntity |

---

### ì—°ê´€ ê´€ê³„

- `author : User` â†’ **ManyToOne** (ì§ˆë¬¸ ì‘ì„±ì)
- `answerList : List<Answer>` â†’ **OneToMany** (ì§ˆë¬¸ì— ë‹¬ë¦° ë‹µë³€, CascadeType.PERSIST/REMOVE)

---

## ğŸ“Œ Thymeleaf Template

- ì§ˆë¬¸ ëª©ë¡: `question_list`
- ì§ˆë¬¸ ì‘ì„± í¼: `question_form`
- ì§ˆë¬¸ ìƒì„¸: `question_detail`
- ì§ˆë¬¸ ìˆ˜ì • í¼: `question_modify_form`

## API ëª…ì„¸ì„œ

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ê°’ | ëª¨ë¸ ì†ì„± | ë°˜í™˜ |
| --- | --- | --- | --- | --- | --- |
| GET | `/question/list` | ì§ˆë¬¸ ëª©ë¡ ì¡°íšŒ | `page`(int, ê¸°ë³¸ 0), `kw`(String, ê¸°ë³¸ "") | `paging`(Page<QuestionResponseDTO>), `kw` | `question_list` |
| GET | `/question/create` | ì§ˆë¬¸ ì‘ì„± í¼ | - | `questionCreateDTO` | `question_form` |
| POST | `/question/create` | ì§ˆë¬¸ ì‘ì„± ì²˜ë¦¬ | `QuestionCreateDTO` (ê²€ì¦ í¬í•¨) | - | ì„±ê³µ: `redirect:/question/list`<br>ì‹¤íŒ¨: `question_form` |
| GET | `/question/detail/{id}` | ì§ˆë¬¸ ìƒì„¸ ì¡°íšŒ + ë‹µë³€ í˜ì´ì§• | `page`(int, ê¸°ë³¸ 0), `answerPage`(int, ê¸°ë³¸ 0) | `question`(QuestionResponseDTO), `answerPaging`(Page<Answer>), `answerCreateDto` | `question_detail` |
| GET | `/question/modify/{id}` | ì§ˆë¬¸ ìˆ˜ì • í¼ | `id` | `questionUpdateDto`, `questionId` | `question_modify_form` |
| POST | `/question/modify/{id}` | ì§ˆë¬¸ ìˆ˜ì • ì²˜ë¦¬ | `QuestionUpdateDto` (ê²€ì¦ í¬í•¨) | - | ì„±ê³µ: `redirect:/question/detail/{id}`<br>ì‹¤íŒ¨: `question_modify_form` |
| GET | `/question/delete/{id}` | ì§ˆë¬¸ ì‚­ì œ | `id` | - | `redirect:/question/list` |

---

# ğŸ› ï¸ Trouble Shooting

## 1. ë¬¸ì œ ìƒí™©

- REST API ë°©ì‹ì— ìµìˆ™í•´ì ¸ì„œ **ìˆ˜ì •(put), ì‚­ì œ(delete)** ìš”ì²­ì„ ê·¸ëŒ€ë¡œ êµ¬í˜„í•˜ë ¤ í–ˆìŒ.
- ê·¸ëŸ¬ë‚˜ **Thymeleaf + HTML form** í™˜ê²½ì—ì„œëŠ” `GET` / `POST` ë°©ì‹ë§Œ ì§€ì›í•œë‹¤ëŠ” ì œì•½ì„ ëª°ëìŒ.
- ê·¸ ê²°ê³¼, í…œí”Œë¦¿ì—ì„œ `PUT`, `PATCH`, `DELETE` ìš”ì²­ì„ ì§ì ‘ ì²˜ë¦¬í•˜ë ¤ê³  ì‹œë„í•˜ë‹¤ê°€ ì—ëŸ¬ ë° ë™ì‘ ë¶ˆê°€ ë¬¸ì œ ë°œìƒ.

## 2. ì‹œë„í•œ í•´ê²° ê³¼ì •

1. ì²˜ìŒì—ëŠ” `PUT`, `DELETE` ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë ¤ê³  í–ˆìœ¼ë‚˜ ë¸Œë¼ìš°ì € form í•œê³„ë¡œ ë¶ˆê°€ëŠ¥.
2. ê°•ì‚¬ë‹˜ê»˜ ì§ˆë¬¸í•˜ê³  ìë£Œë¥¼ ì°¾ì•„ë³´ë©°, **ë¹„ë™ê¸° ìš”ì²­(AJAX, fetch, axios ë“±)** ì„ ì‚¬ìš©í•˜ë©´ `DELETE`, `PUT`, `PATCH`ë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì‚¬ì‹¤ í™•ì¸.
3. í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¹„ë™ê¸° ë°©ì‹ ë„ì… ì „ì´ë¯€ë¡œ, **í…œí”Œë¦¿ ê¸°ë°˜ ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œ ì„ì‹œ í•´ê²°**
  - ìˆ˜ì •(update) â†’ ë“±ë¡(create)ê³¼ ë™ì¼í•˜ê²Œ `POST` ì‚¬ìš©.
  - ì‚­ì œ(delete) â†’ ê°„ë‹¨í•˜ê²Œ `GET` ë§¤í•‘ìœ¼ë¡œ ì²˜ë¦¬.

## 3. ë°°ìš´ ì 

- HTML formì€ ì˜¤ì§ `GET`, `POST`ë§Œ ì§€ì›í•œë‹¤â€¦.
- `PUT`, `PATCH`, `DELETE`ëŠ” **ë¹„ë™ê¸° ìš”ì²­(AJAX/fetch)** ë˜ëŠ” **Spring HiddenHttpMethodFilter** ë“±ì„ í™œìš©í•´ì•¼ í•œë‹¤.
- MVC ê¸°ë°˜ Thymeleaf í”„ë¡œì íŠ¸ì—ì„œëŠ” ìš°ì„  `GET/POST`ë¡œ êµ¬í˜„í•˜ê³ , ì´í›„ RESTful êµ¬ì¡°ë¡œ í™•ì¥í•  ë•ŒëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸° ìš”ì²­ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë¼ëŠ” ê±¸ ì•Œê²Œë˜ì—ˆë‹¤.

---

# ğŸ“Œ Q&A ê²Œì‹œíŒ - ë‹µë³€ ê¸°ëŠ¥(ë‹´ë‹¹ - ì£¼ê¶Œì˜)

##  âœ… ê¸°ëŠ¥

---

- ë‹µë³€ ëª©ë¡ ë³´ê¸° (ì‘ì„±ì, ìƒì„±ì¼, ìˆ˜ì •ì¼ í¬í•¨)
- ë‹µë³€ ë“±ë¡
- ë‹µë³€ ìˆ˜ì •
- ë‹µë³€ ì‚­ì œ

## ğŸï¸ êµ¬í˜„ í™”ë©´

> ë‹µë³€ ë“±ë¡ í™”ë©´
![answer.png](answer.png)

> ë‹µë³€ ìˆ˜ì • í™”ë©´
![answerModify.png](answerModify.png)

## âœ… Entity ì„¤ê³„

Answer
---
| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| --- | --- | --- | --- |
| id | Long | ê¸°ë³¸ í‚¤ | BaseEntity |
| content | String | ë‹µë³€ ë‚´ìš© | `@Column(columnDefinition = "TEXT")` |
| createdDate | LocalDateTime | ìƒì„±ì¼ | BaseEntity |
| modifiedDate | LocalDateTime | ìˆ˜ì •ì¼ | BaseEntity |

ì—°ê´€ ê´€ê³„

- `Question : Answer`  â†’ `1:N`
- `user : Answer` â†’ `1:N`

## ğŸ“Œ Thymeleaf Template

---

- ì§ˆë¬¸ ìƒì„¸ ë‚´ì˜ ë‹µë³€ëª©ë¡ : `question_detail`
- ë‹µë³€ ìˆ˜ì • í¼ : `answer_form`

API ëª…ì„¸ì„œ

---

| **ë©”ì„œë“œ** | **ê²½ë¡œ** | **ì„¤ëª…** | **ìš”ì²­ê°’** | **ëª¨ë¸ ì†ì„±** | **ë°˜í™˜** |
| --- | --- | --- | --- | --- | --- |
| POST | `/answer/create/{id}` | ë‹µë³€ ë“±ë¡ | `questionId`
`AnswerCreateDto` | `AnswerCreateDto` | `question_list` |
| GET | `/answer/delete/{id}` | ë‹µë³€ ì‚­ì œ | `id` | - | `redirect:/question/detail/{id}` |
| GET | `/answer/modify/{id}` | ë‹µë³€ ìˆ˜ì • í¼ | `id` | `AnswerUpdateDto` 
`id` | `answer_form` |
| POST | `/answer/modify/{id}` | ë‹µë³€ ìˆ˜ì • | `id` | - | `redirect:/question/detail/{id}` |

## ğŸ›  Trouble Shooting

---

1. ë‹µë³€ ë“±ë¡ í•„í„°ë§
- ë¬¸ì œ :  `form_errors`  ë¥¼ í™œìš©í•˜ì—¬ ë‹µë³€ ì…ë ¥ í¼ì„ í•„í„°ë§ í•˜ì˜€ì§€ë§Œ, ë³‘í•©í•˜ëŠ” ê³¼ì •ì—ì„œ í•´ë‹¹ íŒŒì¼ì´ ì˜¬ë°”ë¥´ê²Œ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
- í•´ê²° : ì§ˆë¬¸ ë“±ë¡

---

# **ğŸ”¥ ì¶”ê°€ ê¸°ëŠ¥(ë‹´ë‹¹ - ë°•ì„¸ì›…)**

- ì§ˆë¬¸ ëª©ë¡ ê²€ìƒ‰
  - ì œëª©, ë‚´ìš©, ì‘ì„±ì í•„ë“œì—ì„œ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ëŠ” ì§ˆë¬¸ì„ ê²€ìƒ‰
- ì§ˆë¬¸ ëª©ë¡ í˜ì´ì§•
  - `createdDate`Â ë‚´ë¦¼ì°¨ìˆœ ìœ¼ë¡œ ì •ë ¬
  - í˜ì´ì§€ ë‹¹ 10ê°œì˜ ì§ˆë¬¸ ì œí•œ
  - í˜ì´ì§€ ë²ˆí˜¸, ì´ì „, ì´í›„, ë§¨ ì•, ë§¨ ë’¤ ì´ë™ ê¸°ëŠ¥
- ë‹µë³€ ëª©ë¡ í˜ì´ì§•
  - `createdDate`Â ë‚´ë¦¼ì°¨ìˆœ ìœ¼ë¡œ ì •ë ¬
  - í˜ì´ì§€ ë‹¹ 5ê°œì˜ ë‹µë³€ ì œí•œ
  - í˜ì´ì§€ ë²ˆí˜¸, ì´ì „, ì´í›„, ë§¨ ì•, ë§¨ ë’¤ ì´ë™ ê¸°ëŠ¥
- ì§ˆë¬¸ ìƒì„¸ ì¡°íšŒ ì‹œ ì¡°íšŒìˆ˜ ì¦ê°€

---

## **ğŸ” ê¸°ëŠ¥ êµ¬í˜„ í™”ë©´**

>![img_3.png](img_3.png)
![img_4.png](img_4.png)

---

## **âœ¨ ê¸°ëŠ¥ êµ¬í˜„**

### **ğŸ“„ 1. ê²€ìƒ‰ ê¸°ëŠ¥**

### **`QuestionController.java`**

- `@GetMapping("/list")`Â ë©”ì„œë“œì—ì„œÂ `kw`(í‚¤ì›Œë“œ) íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

```java
@GetMapping("/list")
public String list(Model model,
                   @RequestParam(value = "page", defaultValue = "0") int page,
                   @RequestParam(value = "kw", defaultValue = "") String kw) {
    Page<QuestionResponseDTO> paging = this.questionService.getList(page, kw);
    model.addAttribute("paging", paging);
    model.addAttribute("kw", kw);
    return "question_list";
}
```
---

### **`QuestionRepository.java`**

- JPQLÂ `@Query`ë¥¼ ì‚¬ìš©í•˜ì—¬Â `subject`(ì œëª©),Â `content`(ë‚´ìš©),Â `author.username`(ì‘ì„±ì) í•„ë“œì—ì„œ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ëŠ” ì§ˆë¬¸ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.

```java
@Query("""
    select q from Question q
    where q.subject like %:kw%
    or q.content like %:kw%
    or q.author.username like %:kw%
        order by q.createdDate desc
""")
Page<Question> findAllByKeywordOrderByCreatedDateDesc(@Param("kw") String kw, Pageable pageable);
```
---

### **ğŸ“„ 2. í˜ì´ì§• ê¸°ëŠ¥**

**ì§ˆë¬¸ ëª©ë¡ê³¼ ë‹µë³€ ëª©ë¡ì— í˜ì´ì§• ê¸°ëŠ¥ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.**

- `PageRequest.of()`ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ ë²ˆí˜¸, í˜ì´ì§€ ë‹¹ ê²Œì‹œë¬¼ ìˆ˜, ì •ë ¬ ê¸°ì¤€(`createdDate`Â ë‚´ë¦¼ì°¨ìˆœ)ì„ ë‹´ì€Â `Pageable`Â ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```java
@Transactional(readOnly = true)
public Page<QuestionResponseDTO> getList(int page, String kw) {
    Pageable pageable = PageRequest.of(page, PAGE_SIZE, Sort.by(Sort.Direction.DESC, "createdDate"));
    // ...
    Page<Question> pageResult = questionRepository.findAll(pageable);
    // ...
    return pageResult.map(QuestionResponseDTO::fromEntity);
}

```
---

### **`question_list.html`Â (ì§ˆë¬¸ í˜ì´ì§•)**

- Thymeleafë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì „ë‹¬ë°›ì€Â `Page`Â ê°ì²´(`paging`)ì˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§€ë„¤ì´ì…˜ UIë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

---

### **`AnswerService.java`Â (ë‹µë³€ í˜ì´ì§•)**

- `getAnswers`Â ë©”ì„œë“œëŠ”Â `Question`Â ì—”í‹°í‹°ì™€Â `page`Â ë²ˆí˜¸ë¥¼ ë°›ì•„ í•´ë‹¹ ì§ˆë¬¸ì— ë‹¬ë¦° ë‹µë³€ë“¤ì„ í˜ì´ì§• ì²˜ë¦¬í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹µë³€ì€ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ë©ë‹ˆë‹¤.

```java
@Transactional(readOnly = true)
public Page<Answer> getAnswers(Question question, int page) {
    // ë‹µë³€ì€ í•­ìƒ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ (createdDate ë‚´ë¦¼ì°¨ìˆœ)
    Pageable pageable = PageRequest.of(page, PAGE_SIZE, Sort.by(Sort.Direction.DESC, "createdDate"));
    return answerRepository.findByQuestionOrderByCreatedDateDesc(question, pageable);
}

```

### **`question_detail.html`Â (ë‹µë³€ í˜ì´ì§•)**

- ë‹µë³€ ëª©ë¡ ì•„ë˜ì— í˜ì´ì§€ë„¤ì´ì…˜ UIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì§ˆë¬¸ ëª©ë¡ í˜ì´ì§•ê³¼ ìœ ì‚¬í•œ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
 ---

### **ğŸ“„ 3. ì¡°íšŒìˆ˜ ê¸°ëŠ¥**

### **`Question.java`**

- `Question`Â ì—”í‹°í‹°ì—Â `viewCount`Â í•„ë“œë¥¼ ì¶”ê°€í•˜ê³ , ì¡°íšŒìˆ˜ë¥¼ 1 ì¦ê°€ì‹œí‚¤ëŠ”Â `increaseViewCount()`Â ë©”ì„œë“œë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

```java
@Entity
public class Question extends BaseEntity {
    // ...
    @Column(columnDefinition = "integer default 0")
    private Integer viewCount = 0;
    // ...
    public void increaseViewCount() {
        this.viewCount = (this.viewCount == null) ? 1 : this.viewCount + 1;
    }
}

```
---

### **`QuestionController.java`**

- `detail`Â ë©”ì„œë“œì—ì„œ ì§ˆë¬¸ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•  ë•ŒÂ `questionService.getQuestion()`ì„ í˜¸ì¶œí•˜ì—¬ ì¡°íšŒìˆ˜ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

```java
@GetMapping("/detail/{id}")
public String detail(@PathVariable("id") Long id, Model model, /*...*/) {
    // ...
    QuestionResponseDTO questionDto = this.questionService.getQuestion(id, true); // increaseViewë¥¼ trueë¡œ ì „ë‹¬
    // ...
    model.addAttribute("question", questionDto);
    return "question_detail";
}

```
---

## **ğŸ› ï¸ Trouble Shooting**

1. DTO ë„ì…ìœ¼ë¡œ ì¸í•œ í˜ì´ì§• ì˜¤ë¥˜: ì´ˆê¸°ì— ê°œë°œ ìƒíƒœì—ì„œëŠ” í˜ì´ì§•ê³¼ ì •ë ¬ êµ¬í˜„ì„ DTOë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  ì—”í‹°í‹°ì—ì„œ ì§ì ‘ ì°¸ì¡° í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•¨
- **í˜ì´ì§• íƒ€ì…**:Â `Page<Question>`Â â†’Â `Page<QuestionResponseDTO>`ë¡œ ë³€ê²½.
- **í…œí”Œë¦¿ ë°”ì¸ë”©**: ì—”í‹°í‹° ê²½ë¡œ(`author.username`) â†’ DTO í•„ë“œ(`authorUsername`)ë¡œ ë³€ê²½í•˜ì—¬ N+1/ì§€ì—°ë¡œë”© ì´ìŠˆ ë°©ì§€ ë° ì•ˆì •ì„± í–¥ìƒ.
1. ì¡°íšŒìˆ˜ ê¸°ëŠ¥ì´ ë‹µë³€ì„ ì…ë ¥í•˜ë©´ ì˜¬ë¼ê°€ëŠ” ì˜¤ë¥˜:
- **`RedirectAttributes`**ì˜Â **`addFlashAttribute`**ë¥¼ ì‚¬ìš©í•˜ì—¬, ë‹µë³€ ë“±ë¡ê³¼ ê°™ì€ íŠ¹ì • ì‘ì—… í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ë  ë•Œ ì¼íšŒì„± ë°ì´í„°ë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.
- ì´ë¥¼ í†µí•´ ì§ˆë¬¸ ìƒì„¸ í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” "ë°©ê¸ˆ ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€" ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì¡°íšŒìˆ˜ ì¤‘ë³µ ì¦ê°€ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## **ğŸ’¡ ë°°ìš´ ì **

1. **Spring Data JPAì˜ ê°•ë ¥í•¨**:Â `Pageable`ê³¼Â `@Query`Â ì–´ë…¸í…Œì´ì…˜ë§Œìœ¼ë¡œë„ ë³µì¡í•œ ê²€ìƒ‰ ë° í˜ì´ì§• ë¡œì§ì„ ê°„ê²°í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
2. **Thymeleafì˜ ë™ì  ë Œë”ë§ í™œìš©**: Thymeleafì˜ ì¡°ê±´ë¶€ ë Œë”ë§(`th:if`)ê³¼ ë°˜ë³µë¬¸(`th:each`)ì„ í™œìš©í•˜ì—¬ ì„œë²„ì—ì„œ ì „ë‹¬ëœÂ `Page`Â ê°ì²´ì˜ ìƒíƒœì— ë”°ë¼ í˜ì´ì§€ë„¤ì´ì…˜ UIë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ìµí˜”ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë²„ì™€ í…œí”Œë¦¿ ê°„ì˜ ë°ì´í„° ì—°ë™ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

